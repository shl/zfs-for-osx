<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] must watch.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20must%20watch.&In-Reply-To=%3C2DB7E73D-BA41-4147-B062-8289A552C360%40themacplace.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001916.html">
   <LINK REL="Next"  HREF="001917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] must watch.</H1>
    <B>James Relph</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20must%20watch.&In-Reply-To=%3C2DB7E73D-BA41-4147-B062-8289A552C360%40themacplace.co.uk%3E"
       TITLE="[zfs-discuss] must watch.">james at themacplace.co.uk
       </A><BR>
    <I>Sun Oct 11 05:50:37 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001916.html">[zfs-discuss] must watch.
</A></li>
        <LI>Next message: <A HREF="001917.html">[zfs-discuss] must watch.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1919">[ date ]</a>
              <a href="thread.html#1919">[ thread ]</a>
              <a href="subject.html#1919">[ subject ]</a>
              <a href="author.html#1919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I agree. Perhaps it would be a good idea to intentionally not
</I>&gt;<i> reuse recently freed blocks, enforced by some policy?  This
</I>&gt;<i> would remove the desire to do the scrub and the rollback
</I>&gt;<i> is nearly instantaneous.
</I>&gt;<i> -- richard
</I>
Presumably that's what this change then achieves if (as mentioned by  
James R. Van Artsdalen) the new build does defer the reallocation of  
freed space?  The slides from the presentation are available here:

<A HREF="http://www.snia.org/events/storage-developer2009/presentations/monday/JeffBonwick_zfs-What_Next-SDC09.pdf">http://www.snia.org/events/storage-developer2009/presentations/monday/JeffBonwick_zfs-What_Next-SDC09.pdf</A>

On page 10 they specifically say &quot;Rollback made reliable by deferred  
block reallocation&quot;, so it looks like that is what they're up to, and  
it sounds like that may give you a similar level of recoverability  
from damaged pools to that provided with HFS/NTFS volumes by using  
journals.

This may have been something Apple were waiting for before officially  
&quot;sanctioning&quot; ZFS by including it in a release.  Of course that  
doesn't necessarily explain why the MacOSforge builds haven't been  
updated.  Perhaps we'll get a new build when the recoverability from  
pool corruption is up to scratch, just clutching at straws really but  
there's a few filesystem features I got used to using on test systems  
and I'm missing them when building production environments!

James

Website:		www.themacplace.co.uk
Blog:		www.themacplace.co.uk/blog.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.macosforge.org/pipermail/zfs-discuss/attachments/20091011/927e8942/attachment.html">http://lists.macosforge.org/pipermail/zfs-discuss/attachments/20091011/927e8942/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001916.html">[zfs-discuss] must watch.
</A></li>
	<LI>Next message: <A HREF="001917.html">[zfs-discuss] must watch.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1919">[ date ]</a>
              <a href="thread.html#1919">[ thread ]</a>
              <a href="subject.html#1919">[ subject ]</a>
              <a href="author.html#1919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
