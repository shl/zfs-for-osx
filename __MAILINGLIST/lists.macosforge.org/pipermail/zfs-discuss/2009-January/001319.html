<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] Zpool disaster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20Zpool%20disaster&In-Reply-To=%3C49708487.2020400%40jrv.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001316.html">
   <LINK REL="Next"  HREF="001320.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] Zpool disaster</H1>
    <B>James R. Van Artsdalen</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20Zpool%20disaster&In-Reply-To=%3C49708487.2020400%40jrv.org%3E"
       TITLE="[zfs-discuss] Zpool disaster">james-zfsosx at jrv.org
       </A><BR>
    <I>Fri Jan 16 04:58:47 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001316.html">[zfs-discuss] i should get paid for this
</A></li>
        <LI>Next message: <A HREF="001320.html">[zfs-discuss] Zpool disaster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1319">[ date ]</a>
              <a href="thread.html#1319">[ thread ]</a>
              <a href="subject.html#1319">[ subject ]</a>
              <a href="author.html#1319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>mathieu.email wrote:
&gt;<i> Thanks for your replies,
</I>&gt;<i>
</I>&gt;<i> I looked in the /var/log/system.log :
</I>&gt;<i>
</I>&gt;<i> - When I plug the drive (external usb drive), I have : &quot;
</I>&gt;<i> diskarbitrationd[32]: unable to mount /dev/disk2s2 (status code
</I>&gt;<i> 0x00000001). &quot;
</I>&gt;<i> - With the &quot;zpool import&quot; command, nothing appears.
</I>
The diskarbitration error is &quot;normal&quot;.  Since there is no error logged
when ZFS reports an I/O error the ZFS message is probably bogus and the
disk is fine.

Because this happened after a panic I'm guessing it means USB didn't do
cache flushes correctly and the uberblock on the disk point to blocks
that never got written.  There's a good chance that the uberblock from
the previous transaction group will work, but getting ZFS to try to use
that previous uberblock requires either modifying the ZFS code or
clobbering the uberblock that ZFS is trying to use.  You can look at the
Sun/Solaris lists and see if anyone has written a tool to do this.

The data is very likely still on your disk - don't erase it!  The
problem is how to get to the data.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001316.html">[zfs-discuss] i should get paid for this
</A></li>
	<LI>Next message: <A HREF="001320.html">[zfs-discuss] Zpool disaster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1319">[ date ]</a>
              <a href="thread.html#1319">[ thread ]</a>
              <a href="subject.html#1319">[ subject ]</a>
              <a href="author.html#1319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
