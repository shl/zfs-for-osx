<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] Zpool disaster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20Zpool%20disaster&In-Reply-To=%3CF20E166A-1F86-4919-A2C7-3E92542AD49E%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001318.html">
   <LINK REL="Next"  HREF="001315.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] Zpool disaster</H1>
    <B>Alex Blewitt</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20Zpool%20disaster&In-Reply-To=%3CF20E166A-1F86-4919-A2C7-3E92542AD49E%40gmail.com%3E"
       TITLE="[zfs-discuss] Zpool disaster">alex.blewitt at gmail.com
       </A><BR>
    <I>Fri Jan 16 14:32:52 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001318.html">[zfs-discuss] Zpool disaster
</A></li>
        <LI>Next message: <A HREF="001315.html">[zfs-discuss] Zpool disaster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1321">[ date ]</a>
              <a href="thread.html#1321">[ thread ]</a>
              <a href="subject.html#1321">[ subject ]</a>
              <a href="author.html#1321">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please, don't use USB disks if you value your data. Get a decent  
FireWire enclosure instead, which outperforms USB as well.

I wrote a blog entry on the fragility of USB drives on Leopard a while  
ago, but sadly most people think that 480&gt;400 implies USB is faster -  
and with Apple's apparent abandonment of FireWire that it is somehow a  
legacy technology.

None of this helps what happens when the disks do fail, but bear in  
mind that it's not necessarily ZFS's fault - in fact, it has detected  
a failure earlier on than perhaps other file systems would and perhaps  
still has the data on it.

I'd advise going out and buying a set of disks and doing a dd copy to  
make a backup of the data before trying to mount it again. It should  
be possible to see if there is any recoverable data by looking at the  
disk's uberblocks, but you would need to write some code rather than a  
utility which will do it automatically. You might also find that  
booting up a copy of opensolaris with a more recent version of ZFS to  
see if it will work.

Alex

Sent from my (new) iPhone

On 16 Jan 2009, at 12:30, &quot;James R. Van Artsdalen&quot; &lt;james- 
<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">zfsosx at jrv.org</A>&gt; wrote:

&gt;<i> Dustin Webb wrote:
</I>&gt;&gt;<i> Did you try zpool status -x like this link
</I>&gt;&gt;<i> says? <A HREF="http://www.sun.com/msg/ZFS-8000-72?">http://www.sun.com/msg/ZFS-8000-72?</A>
</I>&gt;&gt;<i> I hope that it is not your problem.  Good luck.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Dustin Webb
</I>&gt;&gt;<i> ITguy
</I>&gt;&gt;<i> Erb Co Inc
</I>&gt;<i>
</I>&gt;<i> Even in this case it's not necessarily lost - there have been  
</I>&gt;<i> reports of
</I>&gt;<i> people getting around this by clobbering the most recent uberblock.
</I>&gt;<i> Unfortunately I know of no tools to do this at all: you have to  
</I>&gt;<i> clobber
</I>&gt;<i> the right sectors on disk manually.
</I>&gt;<i>
</I>&gt;<i> If this is the problem it's also disturbing since it would imply that
</I>&gt;<i> cache flushes through the USB layer may not be working right.  This is
</I>&gt;<i> the weak point of ZFS in my opinion: the strong dependence on
</I>&gt;<i> write-ordering around an uberblock update.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> zfs-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">zfs-discuss at lists.macosforge.org</A>
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss</A>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001318.html">[zfs-discuss] Zpool disaster
</A></li>
	<LI>Next message: <A HREF="001315.html">[zfs-discuss] Zpool disaster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1321">[ date ]</a>
              <a href="thread.html#1321">[ thread ]</a>
              <a href="subject.html#1321">[ subject ]</a>
              <a href="author.html#1321">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
