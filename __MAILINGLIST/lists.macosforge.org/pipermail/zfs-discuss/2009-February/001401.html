<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss]  One big pool / Several ones ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20%20One%20big%20pool%20/%20Several%20ones%20%3F&In-Reply-To=%3CBE3B47B9-F021-495C-914E-1F3ED522C161%40comcast.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001397.html">
   <LINK REL="Next"  HREF="001404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss]  One big pool / Several ones ?</H1>
    <B>Colin Johnson</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20%20One%20big%20pool%20/%20Several%20ones%20%3F&In-Reply-To=%3CBE3B47B9-F021-495C-914E-1F3ED522C161%40comcast.net%3E"
       TITLE="[zfs-discuss]  One big pool / Several ones ?">colin_s_johnson at comcast.net
       </A><BR>
    <I>Mon Feb 16 12:12:05 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001397.html">[zfs-discuss] One big pool / Several ones ?
</A></li>
        <LI>Next message: <A HREF="001404.html">[zfs-discuss] One big pool / Several ones ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1401">[ date ]</a>
              <a href="thread.html#1401">[ thread ]</a>
              <a href="subject.html#1401">[ subject ]</a>
              <a href="author.html#1401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I saw everyone's posts about building an OpenSolaris server.

I just went through weeks of hell doing this, so maybe I can share my  
experiences:

My current system is as follows:

Dell PowerEdge SC1430 quad core server with 6GB RAM.
1x 80GB drive for OpenSolaris rpool (not mirrored yet, but I'll use an  
external USB drive for this).

4x750GB Seagate drives in a single RAIDZ pool and a SATA port left  
over and a bay left over for a hot spare. I broke the connector off  
one of my drives, so it's either hot glue or buy another for $75.
I run the 80GB drive off the motherboard and the 4x Seagates off a  
SuperMicro AOC SAT2-MV8.
I'm running build 106 and I have had zero issues with it now that it  
is up and running.
I've bench marked OpenSolaris with the drives in normal stripe,  
mirror, raidz and raidz2 and using the kernel CIFS server and both a  
5GB zip drag drop test and IOMeter, consistently get around 50MB/ 
second, regardless of configuration.
The stripe and mirror is a 'little' faster, but not so you would notice.
My recommendation is to run raidz with a hot spare if this is your NAS.

I originally planned to also run an external array from the same  
server but I had major issues with this Super Micro board.
It turns out that after 3 weeks of hell, Super Micro eventually  
admitted that the board does NOT and never will support 1.5TB or  
higher drives. The Seagate's I had planned to use were giving all  
sorts of weird errors.
The end result is I really learned a lot about setting up OpenSolaris.

This left me with a EnhanceBox ML-8 infiniband external enclosure and  
8x 1.5TB drives to play with :)
I ended up using the 3Ware 3650SE 8LPML card in my Mac Pro (8 core +  
6GB RAM) and using the Sidecare drivers for Leopard.
3Ware tell me they will have full Leopard and OpenSolaris support for  
all their boards in a matter of days (so this gives another  
alternative to the Supermicro, running as JBOD).

Even this wasn't plain sailing as the drivers wouldn't work correctly  
on anything that required parity (RAID 5, 50, 6 etc).
I reluctantly tried configuring it as raid 10 (striped of mirrors) and  
although I have 5.45TB usable out of 8x1.5TB drives, it has by  
accident turned into the best possible solution.
It is lightening fast due to the size of the array!

So now I have a Dell server running as a NAS with OpenSolaris, purely  
hosting files and sharing via the kernel CIFS server (very nice).

I have had problems getting SqueezeCenter to build on OpenSolaris. so  
I've given up there.
I've also tried using XBMC linked to the CIFS shares on the  
OpenSolaris NAS for my AppleTV, but the video quality sucks.

The end result is I am loaning my new MacBook Pro to the temporary  
task of running iTunes and SlimServer and pointing to the NAS to get  
the files via CIFS.
I will replace the MacBook Pro with wither an old dual core Mac Mini  
or wait a few weeks to see if the new model arrives.

This works pretty flawlessly and I use Automater to mount the CIFS  
shares at reboot.

The large extrenal DAS array is used for very very fast storage when/ 
if I need it and also as a backup target for the OpenSolaris NAS.

All I need to do now is get some backup scheme in place. I'd love to  
use iSCSI from the Mac Mini to the NAS but that's an exercise for later.

Please don't hesitate to ask if you have any questions about  
OpenSolaris, I feel I could write a book on it now :)

~Colin

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001397.html">[zfs-discuss] One big pool / Several ones ?
</A></li>
	<LI>Next message: <A HREF="001404.html">[zfs-discuss] One big pool / Several ones ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1401">[ date ]</a>
              <a href="thread.html#1401">[ thread ]</a>
              <a href="subject.html#1401">[ subject ]</a>
              <a href="author.html#1401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
