<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] Filesystem operations hang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20Filesystem%20operations%20hang&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000935.html">
   <LINK REL="Next"  HREF="000939.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] Filesystem operations hang</H1>
    <B>Wout Mertens</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20Filesystem%20operations%20hang&In-Reply-To="
       TITLE="[zfs-discuss] Filesystem operations hang">wmertens at cisco.com
       </A><BR>
    <I>Mon Oct  6 12:29:34 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000935.html">[zfs-discuss] increased partiiton sizes for raidz
</A></li>
        <LI>Next message: <A HREF="000939.html">[zfs-discuss] Filesystem operations hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Heyhey,

I just got a brand-spanking-new 1TB USB disk and I figured I needed  
ZFS on it. So I got the 119 binaries and created a pool as in the wiki.

I started to copy over my stuff to it using Finder, which went  
swimmingly (180GB), but after a while I noticed that things did not  
proceed at all. Currently finder is stuck at 90% of the copy and  
commands that call fstat() all hang. zpool status etc don't hang as  
you can see below. Reading the raw device with dd doesn't hang either,  
so it's somewhere above the device layer.

Not a peep in syslog. Should I be doing something special for better  
logs?

I tried doing a zpool export -f but that hung. I'll now disconnect the  
USB device and see what happens (I'm expecting a crash so I'm sending  
this before that ;-) )

I just thought I'd throw the data point out there.

Wout.


wmertens-mac-2 ~ $ zpool list
NAME                    SIZE    USED   AVAIL    CAP  HEALTH     ALTROOT
Z                       931G    160G    771G    17%  ONLINE     -

wmertens-mac-2 ~ $ zpool status
   pool: Z
  state: ONLINE
status: The pool is formatted using an older on-disk format.  The pool  
can
	still be used, but some features are unavailable.
action: Upgrade the pool using 'zpool upgrade'.  Once this is done, the
	pool will no longer be accessible on older software versions.
  scrub: none requested
config:

	NAME        STATE     READ WRITE CKSUM
	Z           ONLINE       0     0     0
	  disk1s2   ONLINE       0     0     0

errors: No known data errors

wmertens-mac-2 ~ $ diskutil info disk1
    Device Identifier:        disk1
    Device Node:              /dev/disk1
    Part Of Whole:            disk1
    Device / Media Name:      WDC WD10 EAVS-00D7B0 Media

    Volume Name:
    Mount Point:

    Partition Type:           GUID_partition_scheme
    Bootable:                 Not bootable
    Media Type:               Generic
    Protocol:                 USB
    SMART Status:             Not Supported

    Total Size:               931.5 Gi (1000204886016 B) (1953525168  
512-byte blocks)
    Free Space:               0.0 B (0 B) (0 512-byte blocks)

    Read Only:                No
    Ejectable:                Yes
    Whole:                    Yes
    Internal:                 No
    OS 9 Drivers:             No
    Low Level Format:         Not Supported

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000935.html">[zfs-discuss] increased partiiton sizes for raidz
</A></li>
	<LI>Next message: <A HREF="000939.html">[zfs-discuss] Filesystem operations hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
