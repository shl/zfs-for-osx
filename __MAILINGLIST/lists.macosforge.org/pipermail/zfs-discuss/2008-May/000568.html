<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] Where's the self healing?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20Where%27s%20the%20self%20healing%3F&In-Reply-To=481F3434.6010406%40loveturtle.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000566.html">
   <LINK REL="Next"  HREF="000571.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] Where's the self healing?</H1>
    <B>Scott Palmer</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20Where%27s%20the%20self%20healing%3F&In-Reply-To=481F3434.6010406%40loveturtle.net"
       TITLE="[zfs-discuss] Where's the self healing?">swpalmer at gmail.com
       </A><BR>
    <I>Mon May  5 10:59:54 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000566.html">[zfs-discuss] Where's the self healing?
</A></li>
        <LI>Next message: <A HREF="000571.html">[zfs-discuss] Where's the self healing?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#568">[ date ]</a>
              <a href="thread.html#568">[ thread ]</a>
              <a href="subject.html#568">[ subject ]</a>
              <a href="author.html#568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, May 5, 2008 at 12:22 PM, Dillon Kass &lt;<A HREF="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">lists at loveturtle.net</A>&gt; wrote:

&gt;<i> Scott Palmer wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; While testing my mirrored pool I decided to unplug the power for one of
</I>&gt;<i> &gt; the firewire drives while I was updating some data on the filesystem.  I
</I>&gt;<i> &gt; expected the pool status/health to change from &quot;ONLINE&quot; to &quot;DEGRADED&quot; it did
</I>&gt;<i> &gt; not.  Both drives in the mirror remained listed as &quot;ONLINE&quot;.  But then I
</I>&gt;<i> &gt; noticed &quot;zpool status&quot; saying:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; scott-palmers-imac:~ scott$ zpool status
</I>&gt;<i> &gt;  pool: tank
</I>&gt;<i> &gt;  state: ONLINE
</I>&gt;<i> &gt; status: One or more devices has experienced an unrecoverable error.  An
</I>&gt;<i> &gt;    attempt was made to correct the error.  Applications are unaffected.
</I>&gt;<i> &gt; action: Determine if the device needs to be replaced, and clear the
</I>&gt;<i> &gt; errors
</I>&gt;<i> &gt;    using 'zpool clear' or replace the device with 'zpool replace'.
</I>&gt;<i> &gt;   see: <A HREF="http://www.sun.com/msg/ZFS-8000-9P">http://www.sun.com/msg/ZFS-8000-9P</A>
</I>&gt;<i> &gt;  scrub: none requested
</I>&gt;<i> &gt; config:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    NAME         STATE     READ WRITE CKSUM
</I>&gt;<i> &gt;    tank         ONLINE       0     0     0
</I>&gt;<i> &gt;      mirror     ONLINE       0     0     0
</I>&gt;<i> &gt;        disk1s2  ONLINE       0     0     0
</I>&gt;<i> &gt;        disk2s2  ONLINE   6.43K 33.9K     0
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; errors: No known data errors
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Huh?  Unrecoverable error?  I thought ZFS was all about recovering.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  It did heal, What you're seeing here is just notification that there is
</I>&gt;<i> a problem with disk2. You could either use zpool scrub to search the entire
</I>&gt;<i> disk for more errors, or you could just run zpool clear to reset the error
</I>&gt;<i> counters. That's why the state was still &quot;online&quot;, because it did perform
</I>&gt;<i> &quot;self healing&quot;. Pull the disk out and you'll see &quot;state: degraded&quot; because
</I>&gt;<i> that is something it can't self-heal.
</I>

Really?
What do those read/write numbers mean listed next to disk2s2?
Why does it still list disk2s2 as being in the pool when diskutil indicates
there is no such thing as disk2 in the system at that point?  (The drive
showed up as disk3 when it was powered on.)

The status information is certainly not clear about what happened.  I didn't
observe any period where disk2s2 was being resilvered... as it would need to
be since there was new data on disk1... but maybe that just happened too
quickly to notice?

Why didn't I see &quot;state: degraded&quot; while disk2 was powered off?


Regards,

Scott
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.macosforge.org/pipermail/zfs-discuss/attachments/20080505/f95e6e81/attachment.html">http://lists.macosforge.org/pipermail/zfs-discuss/attachments/20080505/f95e6e81/attachment.html</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000566.html">[zfs-discuss] Where's the self healing?
</A></li>
	<LI>Next message: <A HREF="000571.html">[zfs-discuss] Where's the self healing?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#568">[ date ]</a>
              <a href="thread.html#568">[ thread ]</a>
              <a href="subject.html#568">[ subject ]</a>
              <a href="author.html#568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
