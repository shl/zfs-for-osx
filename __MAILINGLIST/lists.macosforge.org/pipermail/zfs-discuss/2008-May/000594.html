<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] simpler approach for reproducing files-in-limbo
	problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20simpler%20approach%20for%20reproducing%20files-in-limbo%0A%09problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000590.html">
   <LINK REL="Next"  HREF="000595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] simpler approach for reproducing files-in-limbo
	problem</H1>
    <B>James Snyder</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20simpler%20approach%20for%20reproducing%20files-in-limbo%0A%09problem&In-Reply-To="
       TITLE="[zfs-discuss] simpler approach for reproducing files-in-limbo
	problem">jbsnyder at gmail.com
       </A><BR>
    <I>Sun May 11 18:40:06 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000590.html">[zfs-discuss] my first zfs panic
</A></li>
        <LI>Next message: <A HREF="000595.html">[zfs-discuss] Re: simpler approach for reproducing files-in-limbo
	problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#594">[ date ]</a>
              <a href="thread.html#594">[ thread ]</a>
              <a href="subject.html#594">[ subject ]</a>
              <a href="author.html#594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been able to reproduce the issue I've been having with files sometimes
going into something of a limbo state, using bonnie++'s create/stat/delete
files routine.
I don't get a failure every time, but if I kickstart a few of them with the
following options, I usually get a failure after a few tries:

bonnie++ -b -n 100 -s 0

Output:
Create files in sequential order...done.
Stat files in sequential order...done.
Delete files in sequential order...done.
Create files in random order...Can't change to directory ./Bonnie.86484
Cleaning up test directory after error.
Bonnie: drastic I/O error (rmdir): No such file or directory

If I check after the failure:

ls -al Bonnie.86484
total 36
drwx------   2 jsnyder  staff    2 May 11 20:31 .
drwxr-xr-x@ 65 jsnyder  staff  107 May 11 20:35 ..

so the file is there, but it couldn't change to it, or delete it after that
failed...

Generally the failure happens on the &quot;create files in random order&quot; stage..

Can anyone else reproduce this issue, or is it just me :-)


-- 
James Snyder
Biomedical Engineering
Northwestern University
<A HREF="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">jbsnyder at gmail.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.macosforge.org/pipermail/zfs-discuss/attachments/20080511/12b1f6c4/attachment.html">http://lists.macosforge.org/pipermail/zfs-discuss/attachments/20080511/12b1f6c4/attachment.html</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000590.html">[zfs-discuss] my first zfs panic
</A></li>
	<LI>Next message: <A HREF="000595.html">[zfs-discuss] Re: simpler approach for reproducing files-in-limbo
	problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#594">[ date ]</a>
              <a href="thread.html#594">[ thread ]</a>
              <a href="subject.html#594">[ subject ]</a>
              <a href="author.html#594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
