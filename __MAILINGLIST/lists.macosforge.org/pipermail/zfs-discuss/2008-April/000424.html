<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] RAID-Z not re-mounting on reboot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20RAID-Z%20not%20re-mounting%20on%20reboot&In-Reply-To=636fd28e0804080820q310e5c1dk82d292d4caee3949%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000423.html">
   <LINK REL="Next"  HREF="000425.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] RAID-Z not re-mounting on reboot</H1>
    <B>Dillon Kass</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20RAID-Z%20not%20re-mounting%20on%20reboot&In-Reply-To=636fd28e0804080820q310e5c1dk82d292d4caee3949%40mail.gmail.com"
       TITLE="[zfs-discuss] RAID-Z not re-mounting on reboot">lists at loveturtle.net
       </A><BR>
    <I>Tue Apr  8 08:35:23 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000423.html">[zfs-discuss] RAID-Z not re-mounting on reboot
</A></li>
        <LI>Next message: <A HREF="000425.html">[zfs-discuss] RAID-Z not re-mounting on reboot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#424">[ date ]</a>
              <a href="thread.html#424">[ thread ]</a>
              <a href="subject.html#424">[ subject ]</a>
              <a href="author.html#424">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>With the whole disk vs partition cache issue from what I understand this 
is specific to the implementation.

It's true on Solaris, not true on FreeBSD, and I have no idea on OSX 
except to say that the method below is how Apple is telling us to do it. 
So it's safe to assume that it is the correct method.

Alex Blewitt wrote:
&gt;<i> On Tue, Apr 8, 2008 at 5:15 AM, Matt Snow &lt;<A HREF="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">mattsnow at gmail.com</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Adrian,
</I>&gt;&gt;<i> I had the exact same problem. you have to use the command line diskutil to
</I>&gt;&gt;<i> create the EFI label and ZFS slice using this command:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> diskutil partitiondisk /dev/disk2 GPTFormat ZFS %noformat% 100%
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I thought this was bad because (a) you end up with a disk2s2
</I>&gt;<i> partition, and (b) the on-disk format of ZFS leaves the first X bytes
</I>&gt;<i> free so that an EFI label can be put on there anyway? In any case, (c)
</I>&gt;<i> ZFS works better if it's given complete control of the disk since it
</I>&gt;<i> can use the on-disk cache properly, whereas if it's given a partition
</I>&gt;<i> (even if that partition is most of the system and the other partitions
</I>&gt;<i> are never written) then it doesn't know that it has the whole disk and
</I>&gt;<i> thus doesn't use the disk cache.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> zfs-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">zfs-discuss at lists.macosforge.org</A>
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">http://lists.macosforge.org/mailman/listinfo/zfs-discuss</A>
</I>&gt;<i>   
</I>
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000423.html">[zfs-discuss] RAID-Z not re-mounting on reboot
</A></li>
	<LI>Next message: <A HREF="000425.html">[zfs-discuss] RAID-Z not re-mounting on reboot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#424">[ date ]</a>
              <a href="thread.html#424">[ thread ]</a>
              <a href="subject.html#424">[ subject ]</a>
              <a href="author.html#424">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
