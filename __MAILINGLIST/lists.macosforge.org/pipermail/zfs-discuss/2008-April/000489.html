<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] Re: RAIDZ continuous panic after zpool replace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20Re%3A%20RAIDZ%20continuous%20panic%20after%20zpool%20replace&In-Reply-To=20080416105414.C04602482A9%40lists.macosforge.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000488.html">
   <LINK REL="Next"  HREF="000490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] Re: RAIDZ continuous panic after zpool replace</H1>
    <B>Ralf Bertling</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20Re%3A%20RAIDZ%20continuous%20panic%20after%20zpool%20replace&In-Reply-To=20080416105414.C04602482A9%40lists.macosforge.org"
       TITLE="[zfs-discuss] Re: RAIDZ continuous panic after zpool replace">i_see at macnews.de
       </A><BR>
    <I>Wed Apr 16 09:07:36 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000488.html">[zfs-discuss] ram
</A></li>
        <LI>Next message: <A HREF="000490.html">[zfs-discuss] Re: 3 x 750 GB or 4 x 500 GB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#489">[ date ]</a>
              <a href="thread.html#489">[ thread ]</a>
              <a href="subject.html#489">[ subject ]</a>
              <a href="author.html#489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi you might try booting with whatever drive is missing in the list  
below detached.
Probably that will bring your pool back up in &quot;degraded&quot; state. If you  
can, that would be a good time to evacuate your data to other drives.
Do NOT re-attach the drive with the current version as that will  
probably return you to the point of PANIC.
You might try backing up and then zeroing the bad uberblock data on  
the device to stop the panics, but then probably the drive will not be  
recognized by ZFS.
dd and the archives of this lists may be your friend.
Maybe No&#235;l also has some helpful advice. She will probably also like  
to reproduce your situation the first and last MB of each device and  
the output of diskutil -list might be helpful.
Hope this helps,
	ralf
Am 16.04.2008 um 12:54 schrieb <A HREF="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">zfs-discuss-request at lists.macosforge.org</A>:
&gt;<i> Re: RAIDZ continuous panic after zpool replace
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Turns out a Belenix LiveCD recognizes my SATA card and sees my pool.  
</I>&gt;<i> But it's not all good news. For some reason, though Belenix shows  
</I>&gt;<i> seven out of eight devices online and happy, it still claims it  
</I>&gt;<i> can't import the pool. Here's the zpool import:
</I>&gt;<i>
</I>&gt;<i> pool: Archives
</I>&gt;<i> id: 16750878087681595004
</I>&gt;<i> state: UNAVAIL
</I>&gt;<i> status: One or more devices are missing from the system.
</I>&gt;<i> action: The pool cannot be imported. Attach the missing devices and  
</I>&gt;<i> try again.
</I>&gt;<i> see: <A HREF="http://www.sun.com/msg/ZFS-8000-3C">http://www.sun.com/msg/ZFS-8000-3C</A>
</I>&gt;<i> config:
</I>&gt;<i>
</I>&gt;<i> 	Archives		UNAVAIL	insufficient replicas
</I>&gt;<i> 		raidz1	UNAVAIL	corrupted data
</I>&gt;<i> 		c8d1p0	ONLINE
</I>&gt;<i> 		c2t1d0p0	ONLINE
</I>&gt;<i> 	`	c7d1p0	ONLINE
</I>&gt;<i> 		c2t0d0p0	ONLINE
</I>&gt;<i> 		c8d0s1	ONLINE
</I>&gt;<i> 		c4d0s1	ONLINE
</I>&gt;<i> 		636893339691769212	UNAVAIL	cannot open
</I>&gt;<i> 		c5d0s1	ONLINE
</I>&gt;<i>
</I>&gt;<i> Looks fine, right? (Well, aside from the fact is should say DEGRADED  
</I>&gt;<i> not UNAVAIL.) One missing disk in an 8-disk raidz1 pool. But zpool  
</I>&gt;<i> import -f Archives says:
</I>&gt;<i>
</I>&gt;<i> cannot import 'Archives': invalid vdev configuration
</I>&gt;<i>
</I>&gt;<i> So... what's going on then? Any clues?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Adrian
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000488.html">[zfs-discuss] ram
</A></li>
	<LI>Next message: <A HREF="000490.html">[zfs-discuss] Re: 3 x 750 GB or 4 x 500 GB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#489">[ date ]</a>
              <a href="thread.html#489">[ thread ]</a>
              <a href="subject.html#489">[ subject ]</a>
              <a href="author.html#489">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
