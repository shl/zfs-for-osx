<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] On panics scrubbing and zpool status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20On%20panics%20scrubbing%20and%20zpool%20status&In-Reply-To=20080404205651.1DC9323EB4A%40lists.macosforge.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000389.html">
   <LINK REL="Next"  HREF="000393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] On panics scrubbing and zpool status</H1>
    <B>Ralf Bertling</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20On%20panics%20scrubbing%20and%20zpool%20status&In-Reply-To=20080404205651.1DC9323EB4A%40lists.macosforge.org"
       TITLE="[zfs-discuss] On panics scrubbing and zpool status">i_see at macnews.de
       </A><BR>
    <I>Fri Apr  4 14:41:24 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000389.html">[zfs-discuss] Panic on scrub
</A></li>
        <LI>Next message: <A HREF="000393.html">[zfs-discuss] Known problems in day-to-day usage?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#390">[ date ]</a>
              <a href="thread.html#390">[ thread ]</a>
              <a href="subject.html#390">[ subject ]</a>
              <a href="author.html#390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi list,
as mentioned earlier, I had similar problems with my initial pool,  
(probably caused by bad labels that in turn came from drives without a  
GUID disk label).

ZFS on Mac OS X can not handle a couple of things gracefully:
1. The pool becoming unavailable (hot unplugging of too many drives or  
errors on non-replicated pools)
2. Corrupt disk labels (can lead to consistant kernel panics on zpool  
status
3. Disks taking a long time to answer requests (this tends to result  
in deadlocks instead of a traditional kernel panic. the problem is,  
you may be unable to export the pool.

For 2. You can try to work with a degraded pool to get your data out  
of the pool and start over.
For 3. if you know the drive causing the problem (I do have one  
FireWire enclosure that occasionally locks up), you may try to export  
the pool (do not unmount anything prior to that not even disk images  
mounted from your ZFS Volumes).
If that does not work and you have a replicated pool, turning off the  
locked device helps but may not be recognized by zfs quickly. You may  
then have to export/reimport your pool or export and reboot to get  
everything back to normal.
Hope this helps,
	ralf
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000389.html">[zfs-discuss] Panic on scrub
</A></li>
	<LI>Next message: <A HREF="000393.html">[zfs-discuss] Known problems in day-to-day usage?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#390">[ date ]</a>
              <a href="thread.html#390">[ thread ]</a>
              <a href="subject.html#390">[ subject ]</a>
              <a href="author.html#390">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
