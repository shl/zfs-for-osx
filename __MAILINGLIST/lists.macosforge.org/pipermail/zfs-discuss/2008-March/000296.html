<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] and another one...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20and%20another%20one...&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000293.html">
   <LINK REL="Next"  HREF="000297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] and another one...</H1>
    <B>Franz Schmalzl</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=%5Bzfs-discuss%5D%20and%20another%20one...&In-Reply-To="
       TITLE="[zfs-discuss] and another one...">franzschmalzl at spamfreemail.de
       </A><BR>
    <I>Sun Mar  9 13:32:18 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000293.html">[zfs-discuss] ZFS as read/write
</A></li>
        <LI>Next message: <A HREF="000297.html">[zfs-discuss] and another one...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#296">[ date ]</a>
              <a href="thread.html#296">[ thread ]</a>
              <a href="subject.html#296">[ subject ]</a>
              <a href="author.html#296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ook thanks...

my main problem was that i did not use a zfs disk as destination
(could have thought of that tough) *shame on me*





On 09.03.2008, at 21:16, Brett Ault-McCoy wrote:

&gt;<i> ------=_Part_27274_8300480.1205093765527
</I>&gt;<i> Content-Type: text/plain; charset=UTF-8
</I>&gt;<i> Content-Transfer-Encoding: 7bit
</I>&gt;<i> Content-Disposition: inline
</I>&gt;<i>
</I>&gt;<i> To do a zfs send/recv of incremental data you need to start with  
</I>&gt;<i> both the
</I>&gt;<i> source and destination having the same snapshot on them, and it has  
</I>&gt;<i> to be
</I>&gt;<i> the last snapshot on the destination.  No other snapshots are  
</I>&gt;<i> necessary.
</I>&gt;<i> You then create a new snapshot on the source, do a &quot;zfs send -i  
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">src at old</A>
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">src at new</A>&quot; on the source then 'zfs recv dest' to apply the incremental  
</I>&gt;<i> to the
</I>&gt;<i> destination.  At that point you can delete all prior snapshots on  
</I>&gt;<i> both the
</I>&gt;<i> dest and src.
</I>&gt;<i>
</I>&gt;<i> In short, an incremental send/recv has to be done using the last  
</I>&gt;<i> snapshot on
</I>&gt;<i> the destination as the incremental reference.
</I>so that means i will always have to keep at least one snapshot  
internal and external as reference and rotate them by hand ?


another question

when my backup dist starts to fill up, how will i be able to rotate my  
backups like time machine does ?

is i understand i allways have to keep the first instance of my  
filesystem complete to act as a reference for the first snapshot




&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ++Brett;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sun, Mar 9, 2008 at 7:00 PM, Franz Schmalzl &lt;
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">franzschmalzl at spamfreemail.de</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> ok just don't understand this
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> to have incrementel backups via snapshots i think will have to keep
</I>&gt;&gt;<i> all my snapshots, how is this supposed to work?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> i mean i created one incremental snapshot earlier and sent it to
</I>&gt;&gt;<i> another disk, then i deleted the snapshots...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> to create another incremental backup now, i will need to recieve the
</I>&gt;&gt;<i> first snapshot again, which means i will have to copy all of my data
</I>&gt;&gt;<i> back from my backup disk and have it present twice in my pool...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> i think i'm getting it wrong, can please someone clarify ?
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> zfs-discuss mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">zfs-discuss at lists.macosforge.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------=_Part_27274_8300480.1205093765527
</I>&gt;<i> Content-Type: text/html; charset=UTF-8
</I>&gt;<i> Content-Transfer-Encoding: 7bit
</I>&gt;<i> Content-Disposition: inline
</I>&gt;<i>
</I>&gt;<i> To do a zfs send/recv of incremental data you need to start with  
</I>&gt;<i> both the source and destination having the same snapshot on them,  
</I>&gt;<i> and it has to be the last snapshot on the destination. &amp;nbsp;No  
</I>&gt;<i> other snapshots are necessary.&lt;div&gt;
</I>&gt;<i> &lt;br class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;You then create a  
</I>&gt;<i> new snapshot on the source, do a &amp;quot;zfs send -i <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">src at old</A>  
</I>&gt;<i> <A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">src at new</A>&amp;quot; on the source then &amp;#39;zfs recv dest&amp;#39; to apply  
</I>&gt;<i> the incremental to the destination. &amp;nbsp;At that point you can  
</I>&gt;<i> delete all prior snapshots on both the dest and src.&lt;/div&gt;
</I>&gt;<i> &lt;div&gt;&lt;br class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;In short, an  
</I>&gt;<i> incremental send/recv has to be done using the last snapshot on the  
</I>&gt;<i> destination as the incremental reference.&lt;/div&gt;&lt;div&gt;&lt;br  
</I>&gt;<i> class=&quot;webkit-block-placeholder&quot;&gt;
</I>&gt;<i> &lt;/div&gt;&lt;div&gt;++Brett;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div class=&quot;gmail_quote&quot;&gt;On  
</I>&gt;<i> Sun, Mar 9, 2008 at 7:00 PM, Franz Schmalzl &amp;lt;&lt;a href=&quot;mailto:<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">franzschmalzl at spamfreemail.de</A> 
</I>&gt;<i> &quot;&gt;<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">franzschmalzl at spamfreemail.de</A>&lt;/a&gt;&amp;gt; wrote:&lt;br&gt;&lt;blockquote  
</I>&gt;<i> class=&quot;gmail_quote&quot; style=&quot;margin:0 0 0 .8ex;border-left:1px #ccc  
</I>&gt;<i> solid;padding-left:1ex;&quot;&gt;
</I>&gt;<i> ok just don&amp;#39;t understand this&lt;br&gt;
</I>&gt;<i> &lt;br&gt;
</I>&gt;<i> to have incrementel backups via snapshots i think will have to  
</I>&gt;<i> keep&lt;br&gt;
</I>&gt;<i> all my snapshots, how is this supposed to work?&lt;br&gt;
</I>&gt;<i> &lt;br&gt;
</I>&gt;<i> i mean i created one incremental snapshot earlier and sent it to&lt;br&gt;
</I>&gt;<i> another disk, then i deleted the snapshots...&lt;br&gt;
</I>&gt;<i> &lt;br&gt;
</I>&gt;<i> to create another incremental backup now, i will need to recieve  
</I>&gt;<i> the&lt;br&gt;
</I>&gt;<i> first snapshot again, which means i will have to copy all of my  
</I>&gt;<i> data&lt;br&gt;
</I>&gt;<i> back from my backup disk and have it present twice in my pool...&lt;br&gt;
</I>&gt;<i> &lt;br&gt;
</I>&gt;<i> &lt;br&gt;
</I>&gt;<i> i think i&amp;#39;m getting it wrong, can please someone clarify ?&lt;br&gt;
</I>&gt;<i> &lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div  
</I>&gt;<i> class=&quot;Wj3C7c&quot;&gt;_______________________________________________&lt;br&gt;
</I>&gt;<i> zfs-discuss mailing list&lt;br&gt;
</I>&gt;<i> &lt;a href=&quot;mailto:<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">zfs-discuss at lists.macosforge.org</A>&quot;&gt;<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">zfs-discuss at lists.macosforge.org</A> 
</I>&gt;<i> &lt;/a&gt;&lt;br&gt;
</I>&gt;<i> &lt;a href=&quot;<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-">http://lists.macosforge.org/mailman/listinfo.cgi/zfs-</A> 
</I>&gt;<i> discuss&quot; target=&quot;_blank&quot;&gt;<A HREF="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss</A> 
</I>&gt;<i> &lt;/a&gt;&lt;br&gt;
</I>&gt;<i> &lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;
</I>&gt;<i>
</I>&gt;<i> ------=_Part_27274_8300480.1205093765527--
</I>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000293.html">[zfs-discuss] ZFS as read/write
</A></li>
	<LI>Next message: <A HREF="000297.html">[zfs-discuss] and another one...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#296">[ date ]</a>
              <a href="thread.html#296">[ thread ]</a>
              <a href="subject.html#296">[ subject ]</a>
              <a href="author.html#296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
