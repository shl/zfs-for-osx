<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] Mounting subdirectories via NFS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20Mounting%20subdirectories%20via%20NFS&In-Reply-To=%3C20081120160606.GA59987%40wacko.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001085.html">
   <LINK REL="Next"  HREF="001087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] Mounting subdirectories via NFS</H1>
    <B>Mike Mackovitch</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20Mounting%20subdirectories%20via%20NFS&In-Reply-To=%3C20081120160606.GA59987%40wacko.local%3E"
       TITLE="[zfs-discuss] Mounting subdirectories via NFS">macko at apple.com
       </A><BR>
    <I>Thu Nov 20 08:06:06 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001085.html">[zfs-discuss] Mounting subdirectories via NFS
</A></li>
        <LI>Next message: <A HREF="001087.html">[zfs-discuss] Log messages 'add_fsevent: no name hard-link!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1086">[ date ]</a>
              <a href="thread.html#1086">[ thread ]</a>
              <a href="subject.html#1086">[ subject ]</a>
              <a href="author.html#1086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Nov 20, 2008 at 12:24:45PM +0000, Alex Blewitt wrote:
&gt;<i> I'm having a problem with NFS exports and ZFS.
</I>
Actually it seems to be working as it should.

&gt;<i> In my /etc/exports, I have:
</I>&gt;<i> 
</I>&gt;<i> /Users -alldirs
</I>&gt;<i> 
</I>&gt;<i> I can mount /Users on a client machine, and I see the subdir alex:
</I>
&gt;<i> However, the directory is empty:
</I>
That's because the subdirectory &quot;alex&quot; (on the exported file system
that the &quot;/Users&quot; directory is on) is empty.

&gt;<i> I can't mount the subdir directly, despite -alldirs:
</I>
You mean you can't mount the file system that happens to be mounted
on that subdirectory on the server.

&gt;<i> If I export it explicitly, it works:
</I>
&gt;<i> It would be a pain to have to do this for each user/fs in the
</I>&gt;<i> /etc/exports list - is there something I'm missing?
</I>
I think you are misinterpreting what &quot;-alldirs&quot; does.

The exports(5) man page states that export entries are for exporting
*file systems*.  The -alldirs option is used to allow mounting of any
directory *within* the exported file system.

As described in the exports(5) man page, the NFS server requires (and
has always required) that each exported file system be explicitly
specified in the exports list.  This is not unique to exporting ZFS.

If you would like the ability to automatically export all file systems
mounted underneath an exported directory, I would suggest you file an
enhancement request: <A HREF="http://developer.apple.com/bugreporter/">http://developer.apple.com/bugreporter/</A>

THanks
--macko
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001085.html">[zfs-discuss] Mounting subdirectories via NFS
</A></li>
	<LI>Next message: <A HREF="001087.html">[zfs-discuss] Log messages 'add_fsevent: no name hard-link!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1086">[ date ]</a>
              <a href="thread.html#1086">[ thread ]</a>
              <a href="subject.html#1086">[ subject ]</a>
              <a href="author.html#1086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
