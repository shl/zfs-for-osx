<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [zfs-discuss] ZFS mountpoint in limbo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20ZFS%20mountpoint%20in%20limbo&In-Reply-To=%3CDB347B44-DEE1-4770-A80E-348336FD1240%40hexaneinc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001050.html">
   <LINK REL="Next"  HREF="001063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zfs-discuss] ZFS mountpoint in limbo</H1>
    <B>Matthew Rezny</B> 
    <A HREF="mailto:zfs-discuss%40lists.macosforge.org?Subject=Re%3A%20%5Bzfs-discuss%5D%20ZFS%20mountpoint%20in%20limbo&In-Reply-To=%3CDB347B44-DEE1-4770-A80E-348336FD1240%40hexaneinc.com%3E"
       TITLE="[zfs-discuss] ZFS mountpoint in limbo">mrezny at hexaneinc.com
       </A><BR>
    <I>Sun Nov 16 13:36:59 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001050.html">[zfs-discuss] ZFS mountpoint in limbo
</A></li>
        <LI>Next message: <A HREF="001063.html">[zfs-discuss] ZFS mountpoint in limbo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1062">[ date ]</a>
              <a href="thread.html#1062">[ thread ]</a>
              <a href="subject.html#1062">[ subject ]</a>
              <a href="author.html#1062">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, I was able to do a sudo zpool export -f ZFSextern before doing  
sudo reboot. However, that doesn't address the issue of why the file  
system could not be simply unmounted. There is some error there that  
could perhaps come up in other scenarios, such as when rearranging  
mountpoints where one might want some umounted but others to remain  
mounted in the same pool.

On Nov 15, 2008, at 7:20 AM, Jonathan Edwards wrote:

&gt;<i>
</I>&gt;<i> On Nov 14, 2008, at 8:57 PM, Matthew Rezny wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I have had very good results with ZFS across a large array on my  
</I>&gt;&gt;<i> dual G5. I recently started using ZFS on a single external drive on  
</I>&gt;&gt;<i> my MacBook Pro via eSATA. I have trouble with logout/reboot hanging  
</I>&gt;&gt;<i> recently, which happened when attempting to install software  
</I>&gt;&gt;<i> updates that required a reboot. Before doing I hard reboot, I  
</I>&gt;&gt;<i> attempted to unmount the ZFS volumes and ran into one that is  
</I>&gt;&gt;<i> mounted but claims not to be, as shown below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $ sudo zfs list
</I>&gt;&gt;<i> NAME                         USED  AVAIL  REFER  MOUNTPOINT
</I>&gt;&gt;<i> ZFSextern                   3.23G   270G   274K  /Volumes/ZFSextern
</I>&gt;&gt;<i> ZFSextern/Virtual_Machines  3.23G   270G  3.23G  /Volumes/ZFSextern/ 
</I>&gt;&gt;<i> Virtual_Machines
</I>&gt;&gt;<i> $ sudo zfs umount ZFSextern/Virtual_Machines
</I>&gt;&gt;<i> cannot unmount 'ZFSextern/Virtual_Machines': not currently mounted
</I>&gt;&gt;<i> $ sudo zfs umount ZFSextern
</I>&gt;&gt;<i> cannot unmount '/Volumes/ZFSextern': Resource busy
</I>&gt;<i>
</I>&gt;<i> i typically just export the pool before i reboot on my MBP .. make  
</I>&gt;<i> sure you shut down everything that is accessing the pool and then:
</I>&gt;<i>
</I>&gt;<i> $ sudo zpool export ZFSextern
</I>&gt;<i>
</I>&gt;<i> or
</I>&gt;<i>
</I>&gt;<i> $ sudo zpool export -f ZFSextern
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001050.html">[zfs-discuss] ZFS mountpoint in limbo
</A></li>
	<LI>Next message: <A HREF="001063.html">[zfs-discuss] ZFS mountpoint in limbo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1062">[ date ]</a>
              <a href="thread.html#1062">[ thread ]</a>
              <a href="subject.html#1062">[ subject ]</a>
              <a href="author.html#1062">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.macosforge.org/mailman/listinfo.cgi/zfs-discuss">More information about the zfs-discuss
mailing list</a><br>
</body></html>
